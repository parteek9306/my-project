<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Muscle Up Gym - Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --green:#00ff88;
    --dark:#0f0f0f;
    --card:rgba(26,26,26,0.95);
}

body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,#000,#0f0f0f,#000);
    color:white;
}

/* LOGIN */
#adminLogin{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

.login-box{
    background:var(--card);
    padding:40px;
    border-radius:20px;
    box-shadow:0 0 30px rgba(0,255,136,0.3);
    text-align:center;
    width:300px;
}

.login-box input{
    width:100%;
    padding:12px;
    margin:10px 0;
    border:none;
    border-radius:8px;
}

.btn{
    background:var(--green);
    color:black;
    padding:8px 15px;
    border:none;
    border-radius:20px;
    cursor:pointer;
    font-weight:bold;
}

.dashboard{
    display:none;
    padding:30px;
}

/* HEADER */
.top-bar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:20px;
}

.logout{
    background:transparent;
    border:2px solid var(--green);
    color:var(--green);
    padding:6px 18px;
    border-radius:25px;
    cursor:pointer;
    font-weight:bold;
    transition:0.3s;
}
.logout:hover{
    background:var(--green);
    color:black;
}

/* CARDS */
.cards{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:20px;
    margin-bottom:30px;
}

.card{
    background:var(--card);
    padding:20px;
    border-radius:20px;
    text-align:center;
    box-shadow:0 0 20px rgba(0,255,136,0.2);
}

/* TABLE */
table{
    width:100%;
    border-collapse:collapse;
    background:var(--card);
    border-radius:15px;
    overflow:hidden;
    box-shadow:0 0 25px rgba(0,255,136,0.15);
    margin-bottom:40px;
}

th,td{
    padding:12px;
    text-align:center;
}

th{
    background:var(--green);
    color:black;
}

tr:nth-child(even){
    background:#111;
}

select{
    background:#000;
    color:white;
    border:1px solid var(--green);
    padding:5px;
    border-radius:6px;
}

.search{
    padding:10px;
    width:250px;
    border-radius:8px;
    border:none;
    margin-bottom:15px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="adminLogin">
    <div class="login-box">
        <h2>Admin Login</h2>
        <input type="email" id="adminEmail" placeholder="Admin Email">
        <input type="password" id="adminPass" placeholder="Password">
        <button class="btn" onclick="loginAdmin()">Login</button>
    </div>
</div>

<!-- DASHBOARD -->
<div class="dashboard" id="dashboard">

<div class="top-bar">
    <h2 style="color:var(--green)">Muscle Up Gym Admin Panel</h2>
    <a href="admin-approval.html">
  <button>Payment Approvals</button>
</a>
    <button class="logout" onclick="logoutAdmin()">Logout</button>
</div>

<div class="cards">
    <div class="card">
        <h3>Total Users</h3>
        <h1 id="totalUsers">0</h1>
    </div>
    <div class="card">
        <h3>Pending Reset</h3>
        <h1 id="totalRequests">0</h1>
    </div>
</div>

<input type="text" class="search" placeholder="Search User..." onkeyup="searchUser(this.value)">

<table>
<thead>
<tr>
    <th>Name</th>
    <th>Email</th>
    <th>Plan</th>
    <th>Expiry</th>
    <th>Status</th>
    <th>Screenshot</th>
    <th>Action</th>
</tr>
</thead>
<tbody id="usersTable"></tbody>
</table>

<h3 style="color:var(--green)">Reset Requests</h3>

<table>
<thead>
<tr>
    <th>Email</th>
    <th>Date</th>
    <th>Action</th>
</tr>
</thead>
<tbody id="resetTable"></tbody>
</table>

</div>

<script>

const ADMIN_EMAIL="sharmaparteek302@gmail.com";
const ADMIN_PASSWORD="Parteek__9306";

function loginAdmin(){
    let email=document.getElementById("adminEmail").value.trim();
    let pass=document.getElementById("adminPass").value.trim();

    if(email===ADMIN_EMAIL && pass===ADMIN_PASSWORD){
        document.getElementById("adminLogin").style.display="none";
        document.getElementById("dashboard").style.display="block";
        loadAdminData();
    }else{
        alert("Invalid Credentials");
    }
}

function logoutAdmin(){
    document.getElementById("dashboard").style.display="none";
    document.getElementById("adminLogin").style.display="flex";
}

function getUsers(){
    return JSON.parse(localStorage.getItem("gymUsers"))||[];
}

function saveUsers(users){
    localStorage.setItem("gymUsers",JSON.stringify(users));
}

function calculateExpiry(plan){
    let days=30;
    if(plan==="3 Month") days=90;
    if(plan==="6 Month") days=180;
    if(plan==="1 Year") days=365;
    let d=new Date();
    d.setDate(d.getDate()+days);
    return d.toLocaleDateString();
}

function loadAdminData(){
    let users=getUsers();
    let requests=JSON.parse(localStorage.getItem("resetRequests"))||[];

    document.getElementById("totalUsers").innerText=users.length;
    document.getElementById("totalRequests").innerText=requests.filter(r=>r.status==="Pending").length;

    let table=document.getElementById("usersTable");
    table.innerHTML="";

    users.forEach((user,index)=>{
        let status=user.paymentStatus||"Pending";
        let plan=user.plan||"1 Month";
        let expiry=user.expiry||"-";
        let screenshot=user.screenshot||"";

        table.innerHTML+=`
        <tr>
            <td>${user.name}</td>
            <td>${user.email}</td>

            <td>
                <select onchange="updatePlan(${index},this.value)">
                    <option ${plan==="1 Month"?"selected":""}>1 Month</option>
                    <option ${plan==="3 Month"?"selected":""}>3 Month</option>
                    <option ${plan==="6 Month"?"selected":""}>6 Month</option>
                    <option ${plan==="1 Year"?"selected":""}>1 Year</option>
                </select>
            </td>

            <td>${expiry}</td>

            <td>
                <button class="btn" onclick="togglePayment(${index})">
                    ${status}
                </button>
            </td>

            <td>
                ${screenshot ? `<a href="${screenshot}" target="_blank" style="color:var(--green)">View</a>` : "No Image"}
            </td>

            <td>
                <button class="btn" onclick="deleteUser(${index})">Delete</button>
            </td>
        </tr>`;
    });

    let resetTable=document.getElementById("resetTable");
    resetTable.innerHTML="";
    requests.forEach((req,index)=>{
        if(req.status==="Pending"){
            resetTable.innerHTML+=`
            <tr>
                <td>${req.email}</td>
                <td>${req.date}</td>
                <td>
                    <button class="btn" onclick="approveReset(${index})">Approve</button>
                </td>
            </tr>`;
        }
    });
}

function updatePlan(index,plan){
    let users=getUsers();
    users[index].plan=plan;
    users[index].expiry=calculateExpiry(plan);
    saveUsers(users);
    loadAdminData();
}

function togglePayment(index){
    let users=getUsers();
    users[index].paymentStatus=
        users[index].paymentStatus==="Paid"?"Pending":"Paid";
    saveUsers(users);
    loadAdminData();
}

function deleteUser(index){
    let users=getUsers();
    users.splice(index,1);
    saveUsers(users);
    loadAdminData();
}

function approveReset(index){
    let requests=JSON.parse(localStorage.getItem("resetRequests"))||[];
    requests[index].status="Approved";
    localStorage.setItem("resetRequests",JSON.stringify(requests));
    alert("Reset Approved!");
    loadAdminData();
}

function searchUser(value){
    let rows=document.querySelectorAll("#usersTable tr");
    rows.forEach(row=>{
        row.style.display=row.innerText.toLowerCase().includes(value.toLowerCase())?"":"none";
    });
}

</script>

</body>
</html>
